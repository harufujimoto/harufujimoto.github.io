---
layout: post
title: "C++ Tips"
---

C++の細かい実装メモ。

## 演算子オーバーロード (overloading operator)**

### + / -
型：戻り値の型を入れる。HogeClassの演算子をオーバーロードして、HogeClassそのものを返して欲しかったら

{% highlight cpp %}
// このとき、参照渡しにするとコピーしなくて済む。
// constをつけるのは参照渡しにしながら引数の値に変更が加えられることがないようにするため。
// さらに、constメンバ関数にすることで、メンバ変数の書き換えも防ぐようにする。
HogeClass operator +(const HogeClass& anot) const // 引数のconst : 引数をいじらないため、最後のconst : メンバをいじらないため
{
  HogeClass hoge;
  hoge.num = this->num + anot.num;
  return hoge;
}
{% endhighlight %}

**複合代入演算子 +=/-= **

{% highlight cpp %}
HogeClass& operator +=(const HogeClass& anot) //メンバをいじるから&をつけて、constを最後につけない！！
{
  val += anot.val;
  return *this;
}
{% endhighlight %}

### 代入演算子=

{% highlight cpp %}

HogeClass &operator=(const HogeClass &anot)
{
  // 操作
  return *this; // *thisを返すのがポイント。
}
{% endhighlight %}
## ソートの話

ソートするときに元の配列における添字が知りたいとき、pair<Value,id>のペアを作っても良いが、こうするとちょっと簡単。

(This code is not checked.)
{% highlight cpp %}
template<class T>
vector<int> GetIdOrder(vector<T>& vec){
  int N = vec.size();
  vector<int> res(N);
  iota(res.begin(),res.end(),0);
  sort(vec.begin(),vec.end(),[&](int i,int j){
    return vec[i] < vec[j];
  });
  return res;
}
{% endhighlight %}
